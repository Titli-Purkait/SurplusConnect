<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>SurplusConnect</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>

<body class="bg-gray-50 min-h-screen">

<!-- Navbar -->
<nav class="bg-green-600 text-white px-6 py-4 flex justify-between items-center">
  <h1 class="text-xl font-bold">SurplusConnect</h1>
  <span class="text-sm">Smart Surplus Food Redistribution</span>
</nav>

<!-- Hero -->
<section class="text-center py-10 px-4">
  <h2 class="text-3xl font-bold mb-3">
    Turn Surplus Food into Social Impact
  </h2>
  <p class="text-gray-600 max-w-2xl mx-auto">
    Connecting event organizers, NGOs, and volunteers to reduce food waste
    and feed communities faster.
  </p>
</section>

<!-- Main Content -->
<div class="max-w-6xl mx-auto px-4 grid md:grid-cols-2 gap-8">

  <!-- Donor Card -->
  <div class="bg-white rounded-xl shadow p-6">
    <h3 class="text-xl font-semibold mb-4">üç± Donate Surplus Food</h3>

    <input id="food" placeholder="Food type (e.g. Rice, Curry)"
      class="border p-2 w-full mb-3 rounded"/>

    <input id="meals" type="number" placeholder="Number of meals"
      class="border p-2 w-full mb-3 rounded"/>

    <input id="hours" type="number" placeholder="Hours since cooked"
      class="border p-2 w-full mb-3 rounded"/>

    <input id="location" placeholder="Pickup location"
      class="border p-2 w-full mb-4 rounded"/>

    <button onclick="donate()"
      class="w-full bg-green-600 text-white py-2 rounded hover:bg-green-700 transition">
      Donate Now
    </button>

    <p id="quality" class="mt-4 font-medium"></p>
  </div>

  <!-- Volunteer Card -->
  <div class="bg-white rounded-xl shadow p-6">
    <h3 class="text-xl font-semibold mb-4"> Volunteer Pickups</h3>

    <button onclick="loadFood()"
      class="bg-blue-600 text-white px-4 py-2 rounded mb-4 hover:bg-blue-700 transition">
      Refresh Available Food
    </button>

    <ul id="list" class="space-y-2 text-sm"></ul>
  </div>

</div>

<!-- Impact Section -->
<section class="max-w-4xl mx-auto mt-10 bg-white rounded-xl shadow p-6 text-center">
  <h3 class="text-xl font-semibold mb-3">üåç Community Impact</h3>

  <button onclick="loadStats()"
    class="bg-purple-600 text-white px-6 py-2 rounded hover:bg-purple-700 transition">
    View Impact Stats
  </button>

  <p id="stats" class="mt-4 text-lg font-medium"></p>
</section>

<!-- Footer -->
<footer class="text-center text-sm text-gray-500 mt-10 mb-4">
  Built with  for Hackathons | SurplusConnect
</footer>

<script>
function donate() {
  fetch("http://127.0.0.1:5000/donate", {
    method: "POST",
    headers: { "Content-Type": "application/json" },
    body: JSON.stringify({
      food_type: food.value,
      meals: parseInt(meals.value),
      hours: parseInt(hours.value),
      location: location.value
    })
  })
  .then(res => res.json())
  .then(data => {
    document.getElementById("quality").innerText =
      "AI Food Safety Check: " + data.quality;
  });
}

function loadFood() {
  fetch("http://127.0.0.1:5000/volunteer")
    .then(res => res.json())
    .then(data => {
      const list = document.getElementById("list");
      list.innerHTML = "";

      data.forEach(item => {
        list.innerHTML +=
          '<li class="border rounded p-2">' +
          'üìç <b>' + item.location + '</b><br/>' +
          'üçõ ' + item.food_type + ' | ' + item.quality +
          '</li>';
      });
    });
}

function loadStats() {
  fetch("http://127.0.0.1:5000/stats")
    .then(res => res.json())
    .then(data => {
      document.getElementById("stats").innerText =
        "Meals Saved: " + data.meals_saved +
        " | CO‚ÇÇ Reduced: " + data.co2_saved + " kg";
    });
}
</script>


</body>
</html>
